<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>OTSession Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 737)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">OpenTok iOS SDK </a></h1>
				<a id="developerHome" href="../index.html">TokBox, Inc</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">OTSession Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/connection">&nbsp;&nbsp;&nbsp;&nbsp;connection</option>
	
	<option value="//api/name/connectionCount">&nbsp;&nbsp;&nbsp;&nbsp;connectionCount</option>
	
	<option value="//api/name/delegate">&nbsp;&nbsp;&nbsp;&nbsp;delegate</option>
	
	<option value="//api/name/environment">&nbsp;&nbsp;&nbsp;&nbsp;environment</option>
	
	<option value="//api/name/sessionConnectionStatus">&nbsp;&nbsp;&nbsp;&nbsp;sessionConnectionStatus</option>
	
	<option value="//api/name/sessionId">&nbsp;&nbsp;&nbsp;&nbsp;sessionId</option>
	
	<option value="//api/name/streams">&nbsp;&nbsp;&nbsp;&nbsp;streams</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/connectWithApiKey:token:">&nbsp;&nbsp;&nbsp;&nbsp;- connectWithApiKey:token:</option>
	
	<option value="//api/name/disconnect">&nbsp;&nbsp;&nbsp;&nbsp;- disconnect</option>
	
	<option value="//api/name/initWithSessionId:delegate:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithSessionId:delegate:</option>
	
	<option value="//api/name/initWithSessionId:delegate:environment:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithSessionId:delegate:environment:</option>
	
	<option value="//api/name/publish:">&nbsp;&nbsp;&nbsp;&nbsp;- publish:</option>
	
	<option value="//api/name/unpublish:">&nbsp;&nbsp;&nbsp;&nbsp;- unpublish:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Getting information about the session">Getting information about the session</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Initializing and connecting to a session">Initializing and connecting to a session</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Publishing audio-video streams to a session">Publishing audio-video streams to a session</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/connection">connection</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/connectionCount">connectionCount</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/delegate">delegate</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/environment">environment</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/sessionConnectionStatus">sessionConnectionStatus</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/sessionId">sessionId</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/streams">streams</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/connectWithApiKey:token:">connectWithApiKey:token:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/disconnect">disconnect</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithSessionId:delegate:">initWithSessionId:delegate:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithSessionId:delegate:environment:">initWithSessionId:delegate:environment:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/publish:">publish:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/unpublish:">unpublish:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="OTSession Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">OTSession Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">OTSession.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>The first step in using the OpenTok iOS SDK is to initialize
an OTSession object with a valid
<a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>.
Use the OTSession object to connect to OpenTok using your developer
<a href="http://www.tokbox.com/opentok/api/tools/js/apikey">API key</a> and a valid
<a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/token%5Fcreation.html">token</a>.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						<a title="Getting information about the session" name="task_Getting information about the session"></a>
						<h3 class="subsubtitle task-title">Getting information about the session</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/sessionConnectionStatus">&nbsp;&nbsp;sessionConnectionStatus</a></code>
		<span class="tooltip"><p>The status of this OTSession instance. Useful for ad-hoc queries about session status.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/sessionId">&nbsp;&nbsp;sessionId</a></code>
		<span class="tooltip"><p>The <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>
of this instance. Once initialized, this is an immutable value.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/connectionCount">&nbsp;&nbsp;connectionCount</a></code>
		<span class="tooltip"><p>The number of discrete clients connected to this session. Individual iOS clients
connect to a session by sending the <a href="#//api/name/connectWithApiKey:token:">[OTSession connectWithApiKey:token:]</a> message.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/streams">&nbsp;&nbsp;streams</a></code>
		<span class="tooltip"><p>The streams that are a part of this session, keyed by streamId.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/connection">&nbsp;&nbsp;connection</a></code>
		<span class="tooltip"><p>The <a href="../Classes/OTConnection.html">OTConnection</a> object for this session. The connection property is only available
once the <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidConnect:">[OTSessionDelegate sessionDidConnect:]</a> message is sent. If the session fails to connect,
this property shall remain nil.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/delegate">&nbsp;&nbsp;delegate</a></code>
		<span class="tooltip"><p>The <a href="../Protocols/OTSessionDelegate.html">OTSessionDelegate</a> object that serves as a delegate object for this OTSession object,
handling messages on behalf of this session.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/environment">&nbsp;&nbsp;environment</a></code>
		<span class="tooltip"><p>The active environment for this session. The environment determines whether your app will connect to
the OpenTok staging or production media server (see
<a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/production.html">Testing and production</a>).</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li>
						</ul>
						
						
						<a title="Initializing and connecting to a session" name="task_Initializing and connecting to a session"></a>
						<h3 class="subsubtitle task-title">Initializing and connecting to a session</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithSessionId:delegate:">&ndash;&nbsp;initWithSessionId:delegate:</a></code>
		<span class="tooltip"><p>Initialize this session with a given <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>
and delegate before connecting to OpenTok. Send the <a href="#//api/name/connectWithApiKey:token:">[OTSession connectWithApiKey:token:]</a> message
to connect to the session.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithSessionId:delegate:environment:">&ndash;&nbsp;initWithSessionId:delegate:environment:</a></code>
		<span class="tooltip"><p>Initialize this session with a given <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>,
delegate, and environment, before connecting to OpenTok. The environment determines whether your app will
connect to the OpenTok staging or production media server (see
<a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/production.html">Testing and production</a>).</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/connectWithApiKey:token:">&ndash;&nbsp;connectWithApiKey:token:</a></code>
		<span class="tooltip"><p>Once your application has a valid <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/token%5Fcreation.html">token</a>,
connect with your <a href="http://www.tokbox.com/opentok/api/tools/js/apikey">API key</a> to begin participating in an OpenTok session.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/disconnect">&ndash;&nbsp;disconnect</a></code>
		<span class="tooltip"><p>Disconnect from an active OpenTok session.</p></span>
	</span>
	
	
</li>
						</ul>
						
						
						<a title="Publishing audio-video streams to a session" name="task_Publishing audio-video streams to a session"></a>
						<h3 class="subsubtitle task-title">Publishing audio-video streams to a session</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/publish:">&ndash;&nbsp;publish:</a></code>
		<span class="tooltip"><p>Adds a publisher to the session.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/unpublish:">&ndash;&nbsp;unpublish:</a></code>
		<span class="tooltip"><p>Removes a publisher from the session.</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/connection" title="connection"></a>
	<h3 class="subsubtitle method-title">connection</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The <a href="../Classes/OTConnection.html">OTConnection</a> object for this session. The connection property is only available
once the <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidConnect:">[OTSessionDelegate sessionDidConnect:]</a> message is sent. If the session fails to connect,
this property shall remain nil.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly) OTConnection *connection</code></div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/connectionCount" title="connectionCount"></a>
	<h3 class="subsubtitle method-title">connectionCount</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The number of discrete clients connected to this session. Individual iOS clients
connect to a session by sending the <a href="#//api/name/connectWithApiKey:token:">[OTSession connectWithApiKey:token:]</a> message.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (readonly) int connectionCount</code></div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/delegate" title="delegate"></a>
	<h3 class="subsubtitle method-title">delegate</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The <a href="../Protocols/OTSessionDelegate.html">OTSessionDelegate</a> object that serves as a delegate object for this OTSession object,
handling messages on behalf of this session.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (nonatomic, weak) id&lt;OTSessionDelegate&gt; delegate</code></div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/environment" title="environment"></a>
	<h3 class="subsubtitle method-title">environment</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The active environment for this session. The environment determines whether your app will connect to
the OpenTok staging or production media server (see
<a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/production.html">Testing and production</a>).</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (nonatomic) OTSessionEnvironment environment</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Values for this property are defined in the OTSessionEnvironment enum:</p>

<ul>
<li><code>OTSessionEnvironmentProduction</code> &mdash; The session will connect to the OpenTok production environment. Point your
OpenTok server-side library to api.opentok.com.</li>
<li><code>OTSessionEnvironmentStaging</code> &mdash; The session will connect to the OpenTok staging environment. Point your
OpenTok server-side library to staging.tokbox.com.</li>
</ul>


<p>Once connected, this value is immutable; subsequent calls to <code>setEnvironment</code> will silently fail.</p>

<p>You can set the environment when you initialize an OTSession object by sending the
<a href="#//api/name/initWithSessionId:delegate:environment:">[OTSession initWithSessionId:delegate:environment:]</a> message.</p>

<p>Alternatively, you can send the <a href="#//api/name/initWithSessionId:delegate:">[OTSession initWithSessionId:delegate:]</a> message and set the
<a href="#//api/name/environment">[OTSession environment]</a> property before you connect to the session.</p>

<p>Send the <a href="#//api/name/connectWithApiKey:token:">[OTSession connectWithApiKey:token:]</a> message to connect to the session.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/sessionConnectionStatus" title="sessionConnectionStatus"></a>
	<h3 class="subsubtitle method-title">sessionConnectionStatus</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The status of this OTSession instance. Useful for ad-hoc queries about session status.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (atomic, readonly) OTSessionConnectionStatus sessionConnectionStatus</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Valid values are defined in OTSessionConnectionStatus:</p>

<ul>
<li><code>OTSessionConnectionStatusConnected</code> &ndash; The session is connected.</li>
<li><code>OTSessionConnectionStatusConnecting</code> &ndash; The session is connecting.</li>
<li><code>OTSessionConnectionStatusDisconnected</code> &ndash; The session is not connected.</li>
<li><code>OTSessionConnectionStatusFailed</code> &ndash; The attempt to connect to the session failed.</li>
</ul>


<p>On instantiation, expect the <code>sessionConnectionStatus</code> to have the value <code>OTSessionConnectionStatusDisconnected</code>.</p>

<p>You can use a key-value observer to monitor this property. However, the <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidConnect:">[OTSessionDelegate sessionDidConnect:]</a>
and <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidDisconnect:">[OTSessionDelegate sessionDidDisconnect:]</a> messages are sent to the session&rsquo;s delegate when the session
connects and disconnects.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/sessionId" title="sessionId"></a>
	<h3 class="subsubtitle method-title">sessionId</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>
of this instance. Once initialized, this is an immutable value.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly) NSString *sessionId</code></div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/streams" title="streams"></a>
	<h3 class="subsubtitle method-title">streams</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The streams that are a part of this session, keyed by streamId.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>@property (readonly, retain) NSDictionary *streams</code></div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/connectWithApiKey:token:" title="connectWithApiKey:token:"></a>
	<h3 class="subsubtitle method-title">connectWithApiKey:token:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Once your application has a valid <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/token%5Fcreation.html">token</a>,
connect with your <a href="http://www.tokbox.com/opentok/api/tools/js/apikey">API key</a> to begin participating in an OpenTok session.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (void)connectWithApiKey:(NSString *)<em>apiKey</em> token:(NSString *)<em>token</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>apiKey</em></dt>
			<dd><p>Your OpenTok API key.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>token</em></dt>
			<dd><p>The token generated for this connection.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>When the session connects successfully, the <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidConnect:">[OTSessionDelegate sessionDidConnect:]</a> message is sent to
the session&rsquo;s delegate.</p>

<p>If the session cannot connect, the <a href="../Protocols/OTSessionDelegate.html#//api/name/session:didFailWithError:">[OTSessionDelegate session:didFailWithError:]</a> message is sent to
the session&rsquo;s delegate.</p>

<p>When the session disconnects, the <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidDisconnect:">[OTSessionDelegate sessionDidDisconnect:]</a> message is sent to the
session&rsquo;s delegate.</p>

<p>Note that sessions automatically disconnect when the app is suspended.</p>

<p>Be sure to set up a delegate method for the [OTSessionDelegate session: didFailWithError:] message. See the
OTSessionErrorCode emum defined in OTError.h. It defines code values for the error. An error with code
OTSDKUpdateRequired indicates that the OpenTok iOS SDK used to compile the app is not longer compatible
with the OpenTok infrastructure.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/disconnect" title="disconnect"></a>
	<h3 class="subsubtitle method-title">disconnect</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Disconnect from an active OpenTok session.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (void)disconnect</code></div>
	
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>This method tears down all OTPublisher and OTSubscriber objects that have been initialized.</p>

<p>When the session disconnects, the <a href="../Protocols/OTSessionDelegate.html#//api/name/sessionDidDisconnect:">[OTSessionDelegate sessionDidDisconnect:]</a> message is sent to the
session&rsquo;s delegate.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithSessionId:delegate:" title="initWithSessionId:delegate:"></a>
	<h3 class="subsubtitle method-title">initWithSessionId:delegate:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Initialize this session with a given <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>
and delegate before connecting to OpenTok. Send the <a href="#//api/name/connectWithApiKey:token:">[OTSession connectWithApiKey:token:]</a> message
to connect to the session.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (id)initWithSessionId:(NSString *)<em>sessionId</em> delegate:(id&lt;OTSessionDelegate&gt;)<em>delegate</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>sessionId</em></dt>
			<dd><p>The session ID of this instance.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>delegate</em></dt>
			<dd><p>The delegate (OTSessionDelegate) that handles messages on behalf of this session.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The OTSession object, or nil if initialization fails.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>See <a href="#//api/name/initWithSessionId:delegate:environment:">[OTSession initWithSessionId:delegate:environment:]</a>.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/initWithSessionId:delegate:environment:" title="initWithSessionId:delegate:environment:"></a>
	<h3 class="subsubtitle method-title">initWithSessionId:delegate:environment:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Initialize this session with a given <a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/session%5Fcreation.html">session ID</a>,
delegate, and environment, before connecting to OpenTok. The environment determines whether your app will
connect to the OpenTok staging or production media server (see
<a href="http://www.tokbox.com/opentok/api/tools/js/documentation/overview/production.html">Testing and production</a>).</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (id)initWithSessionId:(NSString *)<em>sessionId</em> delegate:(id&lt;OTSessionDelegate&gt;)<em>delegate</em> environment:(OTSessionEnvironment)<em>environment</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>sessionId</em></dt>
			<dd><p>The session ID of this instance.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>delegate</em></dt>
			<dd><p>The delegate (OTSessionDelegate) that handles messages on behalf of this session.</p></dd>
		</dl>
		
		<dl class="argument-def parameter-def">
			<dt><em>environment</em></dt>
			<dd><p>The environment that this session will attempt to connect to. Set this parameter to a value in
the OTSessionEnvironment enum:</p>

<ul>
<li><code>OTSessionEnvironmentProduction</code> &mdash; The session will connect to the OpenTok production environment. Point your
OpenTok server-side library to api.opentok.com.</li>
<li><code>OTSessionEnvironmentStaging</code> &mdash; The session will connect to the OpenTok staging environment. Point your
OpenTok server-side library to staging.tokbox.com.</li>
</ul>


<p>See <a href="#//api/name/initWithSessionId:delegate:">[OTSession initWithSessionId:delegate:]</a> and <a href="#//api/name/environment">[OTSession environment]</a>.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The OTSession object, or nil if initialization fails.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Alternatively, you can send the <a href="#//api/name/initWithSessionId:delegate:">[OTSession initWithSessionId:delegate:]</a> message and set the
<a href="#//api/name/environment">[OTSession environment]</a> property before you connect to the session.</p>

<p>Send the <a href="#//api/name/connectWithApiKey:token:">[OTSession connectWithApiKey:token:]</a> message to connect to the session.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/publish:" title="publish:"></a>
	<h3 class="subsubtitle method-title">publish:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Adds a publisher to the session.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (void)publish:(OTPublisher *)<em>publisher</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>publisher</em></dt>
			<dd><p>The <a href="../Classes/OTPublisher.html">OTPublisher</a> object for the stream to be published.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>When the publisher begins streaming data, the <a href="../Protocols/OTSessionDelegate.html#//api/name/session:didReceiveStream:">[OTSessionDelegate session:didReceiveStream:]</a> message
is sent to the session&rsquo;s delegate. You can compare the <code>connection.connectionId</code> property of the
OTSession object with the <code>connection.connectionId</code> property of the OTStream object. If they match,
the stream is published from your connection.</p>

<p>Also, when the publisher begins streaming data the <a href="../Protocols/OTPublisherDelegate.html#//api/name/publisherDidStartStreaming:">[OTPublisherDelegate publisherDidStartStreaming:]</a>
message is sent to the publisher&rsquo;s delegate.</p>

<p>If publishing fails, the [OTPublisherDelegate publisher:didFailWithError:] is sent to the publisher&rsquo;s
delegate.</p>

<p>When running in the XCode iOS Simulator, the <a href="../Classes/OTPublisher.html#//api/name/initWithDelegate:">[OTPublisher initWithDelegate:]</a> and
<a href="../Classes/OTPublisher.html#//api/name/initWithDelegate:name:">[OTPublisher initWithDelegate:name:]</a> methods return <code>nil</code>. Sending the [OTSession publish:] message to
<code>nil</code> results in no operation.</p>

<p>Note that multiple publishers are not supported.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/unpublish:" title="unpublish:"></a>
	<h3 class="subsubtitle method-title">unpublish:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Removes a publisher from the session.</p>
	</div>		
	
	
	<div class="method-subsection method-declaration"><code>- (void)unpublish:(OTPublisher *)<em>publisher</em></code></div>
	
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>publisher</em></dt>
			<dd><p>The <a href="../Classes/OTPublisher.html">OTPublisher</a> object to remove from the session.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Upon removing the publisher, the <a href="../Protocols/OTPublisherDelegate.html#//api/name/publisherDidStopStreaming:">[OTPublisherDelegate publisherDidStopStreaming:]</a> message is sent
to the publisher&rsquo;s delegate. The publisher&rsquo;s view is removed from its superview. Also, the
[OTSessionDelegate session:didDropStream:] message is sent to the session&rsquo;s delegate.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">OTSession.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 TokBox, Inc. All rights reserved.</span><br />
						
						</p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
		</script>
	</body>
</html>